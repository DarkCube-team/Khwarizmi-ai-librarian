from modules.base_handler import BaseHandler


class BookHandler(BaseHandler):
    def get_content_type(self):
        return 'book'

    def format_result(self, result):
        """
        Format book for display

        Format:
        ๐น ยซุนููุงูยป
           ููุณูุฏู: ...
           ูุงุดุฑ: ...
           ุณุงู ุงูุชุดุงุฑ: ...
           ุดูุงุฑู ุจุงุฒุงุจ: ...
           ูุญู ูฺฏูุฏุงุฑ: ...
           ููุถูุน: ...
        """
        lines = [f"๐น ยซ{result.get('ุนููุงู', 'ูุงูุดุฎุต')}ยป"]

        if result.get('ูพุฏูุฏุขูุฑูุฏู'):
            lines.append(f"   ููุณูุฏู: {result['ูพุฏูุฏุขูุฑูุฏู']}")

        if result.get('ูุงุดุฑ'):
            lines.append(f"   ูุงุดุฑ: {result['ูุงุดุฑ']}")

        if result.get('ุชุงุฑูุฎ ูุดุฑ'):
            lines.append(f"   ุณุงู ุงูุชุดุงุฑ: {result['ุชุงุฑูุฎ ูุดุฑ']}")

        if result.get('ุดูุงุฑู_ุจุงุฒุงุจ'):
            lines.append(f"   ุดูุงุฑู ุจุงุฒุงุจ: {result['ุดูุงุฑู_ุจุงุฒุงุจ']}")

        if result.get('ูุญู_ูฺฏูุฏุงุฑ'):
            lines.append(f"   ูุญู ูฺฏูุฏุงุฑ: {result['ูุญู_ูฺฏูุฏุงุฑ']}")

        if result.get('ููุถูุน'):
            lines.append(f"   ููุถูุน: {result['ููุถูุน']}")

        return "\n".join(lines)

    def get_system_prompt(self):
        """System prompt for books"""
        return """
ุดูุง ฺฉ ุฏุณุชุงุฑ ููุดููุฏ ฺฉุชุงุจุฎุงูู ุฏุงูุดฺฏุงู ุฎูุงุฑุฒู ุชูุฑุงู ูุณุชุฏ.

**ููุงูู ููู:**

1. **ููุท ุงุฒ ฺฉุชุงุจโูุง ุงุฑุงุฆู ุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ:**
   - ฺฉุชุงุจโูุง ฺฉู ุฏุฑ context ุฏุงุฏู ุดุฏู ุฑุง ุฏููุงู ุงุณุชูุงุฏู ฺฉูุฏ
   - ูุฑฺฏุฒ ูฺฏูุฏ "ฺฉุชุงุจ ูุฏุงุฑู" ุงฺฏุฑ ุฏุฑ context ฺฉุชุงุจ ูุฌูุฏ ุฏุงุฑุฏ
   - ุงฺฏุฑ ฺฉุชุงุจ ุฏุงุฏู ุดุฏูุ ุญุชูุงู ุขู ุฑุง ูุนุฑู ฺฉูุฏ

2. **ูุญูู ูพุงุณุฎ ุจู ุงููุงุน ุณูุงูุงุช:**

   a) **ุฌุณุชุฌู ุงููู** (ูุซู "ฺฉุชุงุจ ูุง ููุง ูุดุฌ"):
      โ ุชูุงู ฺฉุชุงุจโูุง ุฏุงุฏู ุดุฏู ุฑุง ูุนุฑู ฺฉูุฏ ุจุง ุฌุฒุฆุงุช ฺฉุงูู

   b) **ุฏุฑุฎูุงุณุช ูุนุฑู ุจุดุชุฑ** (ูุซู "ุจูู"ุ "ูุนุฑู ฺฉู"ุ "ุจุดุชุฑ"):
      โ ููุท ฺฉุชุงุจโูุง ุฌุฏุฏ (ุบุฑ ุงุฒ ูุจูโูุง) ูุฑุชุจุท ุจุง ููุถูุน ุงุตู ูุนุฑู ฺฉูุฏ

   c) **ุณูุงู ููุงุณูโุง** (ูุซู "ฺฉุฏูู ุจูุชุฑูุ"):
      โ ฺฉุชุงุจโูุง ุฑุง ููุงุณู ฺฉูุฏ ู ุจูุชุฑู ุฑุง ูพุดููุงุฏ ุฏูุฏ
      โ ุงุทูุงุนุงุช ุฌุฏุฏ ูุนุฑู ูฺฉูุฏุ ููุท ููุงุณู ฺฉูุฏ

3. **ูุฑูุช ุงุณุชุงูุฏุงุฑุฏ:**
```
๐น ยซุนููุงูยป
   ููุณูุฏู: ...
   ูุงุดุฑ: ...
   ุณุงู ุงูุชุดุงุฑ: ...
   ุดูุงุฑู ุจุงุฒุงุจ: ...
   ูุญู ูฺฏูุฏุงุฑ: ...
   ููุถูุน: ...
```

4. **ุฒุจุงู**: ูุงุฑุณุ ุฏูุณุชุงููุ ูุฎุชุตุฑ

5. **ููููุนุชโูุง:**
   - ูุฑฺฏุฒ ูฺฏูุฏ "ฺฉุชุงุจ ูุฏุงุฑู" ุงฺฏุฑ context ฺฉุชุงุจ ุฏุงุฑุฏ
   - ูุฑฺฏุฒ ฺฉุชุงุจ ุฌุนู ูุนุฑู ูฺฉูุฏ
   - ุจุฑุง ุณูุงูุงุช ููุงุณูโุงุ ฺฉุชุงุจ ุฌุฏุฏ ูุนุฑู ูฺฉูุฏ
"""

    def get_filters(self):
        """Books don't have filters"""
        return None
